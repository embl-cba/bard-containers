ARG TAG=3.0
FROM registry.git.embl.de/grp-cbbcs/abcdesktop-apps/base-image:ubuntu22-cudnn8-cuda-11-7
USER root

ENV PATH="/opt/conda/bin:/usr/local/cuda/bin:${PATH}"
ARG PATH="/opt/conda/bin:/usr/local/cuda/bin:${PATH}"

RUN DEBIAN_FRONTEND=noninteractive apt-get update \
    && apt-get install --no-install-recommends --yes build-essential python3.9 python3-pip python-is-python3 curl libcurl4-openssl-dev libssl-dev software-properties-common wget libarchive-dev git openssh-client telnet netcat sshcommand sshfs ftp-ssl wput tftp ncftp git git-ftp ftp dbus-x11 libcanberra-gtk-module libcanberra-gtk3-module konsole \
    && apt-get clean \ 
    && add-apt-repository -y ppa:mozillateam/ppa \ 
    && apt install -y firefox-esr \
    && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections

RUN curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor -o /usr/share/keyrings/microsoft-archive-keyring.gpg \
    && echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/microsoft-archive-keyring.gpg] https://packages.microsoft.com/repos/vscode stable main" > /etc/apt/sources.list.d/teams.list

RUN apt update && apt install -y --no-install-recommends code && apt-get clean && rm -rf /var/lib/apt/lists/* \
    && mkdir -p /usr/share/code/extensions && chmod 777 /usr/share/code /usr/share/code/extensions


RUN pip3 install cifar2png \
    && wget https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-x86_64.sh \
    && bash Miniforge3-Linux-x86_64.sh -b -p /opt/conda \
    && rm -f Miniforge3-Linux-x86_64.sh \
    && conda install mamba -n base -c conda-forge

########
RUN mamba create --name sam --yes python=3.11 micro_sam -c conda-forge \
    && mamba run --name sam python -m pip install torch==2.5.0  torchvision==0.20.0 torchaudio==2.5.0 --index-url https://download.pytorch.org/whl/cu121 \
    && /opt/conda/envs/sam/bin/pip install git+https://github.com/ChaoningZhang/MobileSAM.git spotiflow


LABEL oc.icon="microsam.svg"
LABEL oc.icondata="PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iMTU3IiB2aWV3Qm94PSIwIDAgMzc1IDExOCI+PHBhdGggZD0iTTg4LjUgMTQuMjgxYTEwMyAxMDMgMCAwIDEgMy43NSAzLjc1OGMxLjUxNi42NTYgMy4wMTIgMS4xNDggNC41OTggMS41OTggMS45MjUuOTAyIDIuNjIgMS44MDQgMy42NTIgMy42NjQuNTg2IDQuNjY0LjIzNCA5LjIzNC0uOTg0IDEzLjc2Mi0uNyAyLjk1My0uNDA3IDQuMzU1IDEuMTcxIDYuOTUzIDEuMTQ5IDEuNjA5IDEuNzkgMi40NDUgMy41NjMgMy4zMzYgMS43NjIuMTIgMy40OTYuMDg2IDUuMjYyLjAzOSAyLjIzOC0uMDQgMi4yMzgtLjA0IDQuNjY0LjEwNSAyLjY4My4wNDcgNC43NTgtLjA4MiA3LjMyNC0uODk4IDIuMDc4LTIuMDM1IDMuNTM1LTQuMTY0IDUuMTIxLTYuNjAyQTMzLjkgMzMuOSAwIDAgMSAxNDMuMjUgMjcuMDZjMy4xMDItLjUyOCAzLjk5Mi0uMzQgNi42MSAxLjQwNiAyLjA5NyAyLjA0MyAyLjM0NyAyLjY0OCAyLjYyNCA1LjU5LS4wMjcgNC42MzMtMS43NTcgOC45Ni0zLjIzNCAxMy4yOTcgNS45Ni0zLjM4NyA1Ljk2LTMuMzg3IDExLjcxOS03LjA5NCAxLjc4MS0xLjE3NiAxLjc4MS0xLjE3NiAzLjI4MS0xLjE3NmwuMDk0LTEuNDEuNjU2LTEuNTk0IDEuODgzLS42MDVjMy4zODMtMS4xNjQgNi4xMjktMi45NzMgOS4xMzMtNC44OTEgNC45My0zLjA4NiA5Ljc5My01LjkzNCAxNS4yMzQtOC4wMzUuODM2LS4zMjQgMS42NzItLjY0OSAyLjUzMS0uOTg1IDguMDI0LTEuNTI3IDE1LjUyLS44NzggMjIuNDY5IDMuNjIyIDEuNzM0IDEuMzEyIDMuMzcxIDIuNjg3IDUgNC4xMjguNjAyLjUzMiAxLjIwMyAxLjA2IDEuODI0IDEuNjA2YTM1NyAzNTcgMCAwIDEgNy42MDYgNi45ODhjNi4wNTQgNS42NTcgMTEuNDE0IDguOTk2IDE5Ljg3NSA4Ljg0IDMuMjg5LS4yMTkgNi4xODctLjQ4IDguOTQ1LTIuNDAyIDEuNDg0LTIuMzggMi4yMDctNC44NCAzLTcuNTE2YTM3MSAzNzEgMCAwIDEgMi4yNS02LjAxMmMyLjQ2OS0uMDY2IDQuOTM4LS4xMDUgNy40MDYtLjE0LjcwMy0uMDIgMS40MDYtLjA0IDIuMTMtLjA1OWwyLjAzOC0uMDIzIDEuODgtLjAzNWMuNTEuMDg2IDEuMDE5LjE2OCAxLjU0Ni4yNTcuNDk2Ljc0My45ODggMS40ODkgMS41IDIuMjU0LjQ2NS0uMTgzLjkzLS4zNjMgMS40MS0uNTUgMTcuMTU2LTYuNTA4IDM4LjczNS0xMC4yNSA1Ni4zNC0zLjIwOC44MjQuMzEgMS42NTIuNjE0IDIuNTA0LjkzIDMuOTggMS41NjMgNy41NzQgMy4yNjIgMTAuOTk2IDUuODM2Ljc0Mi0xLjczOCAxLjQ4NC0zLjQ3MyAyLjI1LTUuMjYyaDE4Yy4wMzUgMi4wMTYuMDc0IDQuMDM2LjExMyA2LjExNHEuMDYgMi45NC4xMjUgNS44ODMuMDQzIDIuMDM4LjA3OCA0LjA3OC4wNTUgMi45MzYuMTI1IDUuODdsLjAyNCAxLjgzM2MuMDg2IDMuMjEuNDQxIDUuNTc4IDEuNzg1IDguNTM5LjIgMi43MjYuMiAyLjcyNi4xODggNS42ODNsLjAxMSAyLjk2NWMtLjE5MSAyLjUxNi0uNTk0IDMuNDc3LTEuNjk5IDUuNjMzYTg4IDg4IDAgMCAwLS40NjkgNS40NWMtLjA5NCAxLjY3NS0uMTg3IDMuMzQ3LS4yODEgNS4wNzNoLTEyVjg0LjkzaC05djMuMDA3SDMzOWMtLjQ5Ni0xLjI0Mi0uOTg4LTIuNDgtMS41LTMuNzU3LS40NjktLjA0Ny0uOTQxLS4wOTQtMS40MjYtLjE0bC0xLjg1NS0uMTkyYy0uNjEtLjA1OS0xLjIxOS0uMTIxLTEuODQ4LS4xODQtMS42MjEtLjIzOC0xLjYyMS0uMjM4LTMuMTIxLS45ODh2NS4yNjFoLTEydi02Ljc2NWMtNi40MzQuMjUtMTIuODcxLjQ5Ni0xOS41Ljc1LjQ5NiAxLjI0Mi45ODggMi40OCAxLjUgMy43NTh2Mi4yNTdxLTMuMzI4LjAzLTYuNjU2LjA0N2MtLjYzMy4wMDQtMS4yNjIuMDEyLTEuOTE0LjAyLS42MDIgMC0xLjIwNy4wMDQtMS44MzIuMDA4LS44MzYuMDA0LS44MzYuMDA0LTEuNjg4LjAxMS0xLjQxLS4wODUtMS40MS0uMDg1LTIuOTEtLjg0YTcxIDcxIDAgMCAwLTUuMzkgMi40OTNjLS41MzYuMjY1LTEuMDY3LjUzNS0xLjYxOC44MTItMy44MTYgMS45NzMtNy4zNjcgNC4yMTEtMTAuODk4IDYuNjU3LTcuOTM0IDUuNDI1LTE0LjIzOSA3LjcxLTI0LjA5NCA2LjU3NC04LjYyNS0yLjA2Ny0xNS45MzctNi4xNzItMjIuMjE5LTEyLjM5OS0yLjEzMy0yLjAzLTIuMTMzLTIuMDMtNC44NTUtMi44NDMtMS42MzMuMTkxLTEuNjMzLjE5MS0zLjI4NS41NzgtOS4zMTMgMS44OTQtMTcuMDgyLS40MDMtMjUuMTQxLTQuODc1bC0yLjI1LTEuNTA0LTEuNTE2IDEuNDU3Yy04LjExMyA3LjYzMy0xNS40NTcgMTMuMTItMjYuOTM3IDEzLjEwNS0uNjkyIDAtMS4zODMgMC0yLjA5OC4wMDQtNS40My0uMDg2LTEwLjE2NC0uOTkyLTE1LjMyLTIuNjM3LTIuMTE3LS43NjUtMi4xMTctLjc2NS00LjM3OS0uNjU2bC0uNTYyIDIuNDg5Yy0uOTM4IDIuNzczLS45MzggMi43NzMtMi4yOTcgNC4yNzctMS42NDEuNzUtMS42NDEuNzUtMy41MTYuNzUtMi44ODMtMS4xNTYtNC4yNjYtMy4yODUtNS42MjUtNi4wMTJhMjA2IDIwNiAwIDAgMS0uMTg3LTQuMDg2Yy0uMjI3LTMuMjgxLS4yMjctMy4yODEtMi4xMS01Ljg3NS0zLjkxLTEtNi42MTctLjY0OC0xMC4xMzMgMS4yMDctNC40NDUgMi43NzgtOC42NTIgNS44OTktMTIuODM2IDkuMDUxLTMuNTQzIDIuNDYtNy4zMiAyLjU2Ni0xMS40ODQgMS45NTctNS42OTEtMi4zMDUtOC43MjMtNi41OTQtMTEuMjUtMTIuMDI3QTY5IDY5IDAgMCAxIDcyIDc4LjkxOGEyMjkgMjI5IDAgMCAwLTYuMTU2IDYuMzI0Yy05LjA2MyA5LjU4Mi0xOS4yMDMgMTguMjgxLTMyLjkxOCAxOC43My0uNzk3LjAxNi0uNzk3LjAxNi0xLjYxNC4wMjgtLjc1Ny4wMi0uNzU3LjAyLTEuNTMuMDM1LTQuMTMtLjA0My03LjEwNi0xLjA1NS0xMC4xOC0zLjgzNi0uMzYtLjQzMy0uNzE1LS44Ny0xLjA4Ni0xLjMxNi0uMzY4LS40MzQtLjczOS0uODY3LTEuMTE4LTEuMzEzLTIuMjk2LTMuNDg4LTIuMDQ2LTcuODctMS42NDgtMTEuODkgMS4zNjctNS43MjMgNC40MTgtMTAuNTc4IDktMTQuMjc4IDIuMzM2LTEuMDIgMy4zNTUtLjk2OCA2LS43NTQgMi4xNDUgMS4zMjkgMy4zNzUgMi4yNTQgNC41IDQuNTEyLjM4NyAzLjE2NC0uMjAzIDUuMTEtMS41OTQgNy44OS0xLjIyNiAyLjU1Mi0xLjQ1NyAzLjExNC0uODkgNi4wMTMuODE2IDEuNzg1LjgxNiAxLjc4NSAxLjczNCAyLjYzMiAyLjQwNi40OCAzLjk2LjMxNyA2LjA5LS45MzcgNC45NzYtMy43MzggMTAuMDc0LTguMzI0IDEyLjY2LTE0LjA5NC0uNjcyLS4yODEtLjY3Mi0uMjgxLTEuMzYtLjU2Ni0yLjY3MS0xLjUzMi0zLjYxNy0zLjI4NS00Ljc4LTYuMTA2LTIuMTg4LTguNjMzLS42NzItMTcuMjg1IDMuNjU2LTI0Ljg5OCAyLjUzOS00LjAwNCA1LjQzNy03LjY0OSA4LjQ4NC0xMS4yNzQuMzUyLS40MTguNzAzLS44MzYgMS4wNjMtMS4yNyAxNy44OS0yMS4zNDMgMTcuODktMjEuMzQzIDI4LjE4Ny0xOC4yNjlNMTk1IDc0LjQwNmMyLjIwMyAyLjM2IDMuNTk4IDMuNjg4IDYuOTQ1IDMuODMyLjkwMy0uMDExLjkwMy0uMDExIDEuODItLjAyNy42MDYtLjAwNCAxLjIxMi0uMDEyIDEuODM3LS4wMi40Ni0uMDA3LjkyMS0uMDE1IDEuMzk4LS4wMjdsLTEuNzgxLTIuMjA3Yy0uMzMyLS40MS0uNjYtLjgyLTEuMDA0LTEuMjQyLTEuNjY0LTEuODI0LTIuNTYzLTEuODE3LTUuMDktMS45NTMtMi42NjgtLjE0OS0yLjY2OC0uMTQ5LTQuMTI1IDEuNjQ0bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzRiYTc5ZDtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik04OC41IDE0LjI4MWExMDMgMTAzIDAgMCAxIDMuNzUgMy43NThjMS41MTYuNjU2IDMuMDEyIDEuMTQ4IDQuNTk4IDEuNTk4IDEuOTI1LjkwMiAyLjYyIDEuODA0IDMuNjUyIDMuNjY0LjU4NiA0LjY2NC4yMzQgOS4yMzQtLjk4NCAxMy43NjItLjcgMi45NTMtLjQwNyA0LjM1NSAxLjE3MSA2Ljk1MyAxLjE0OSAxLjYwOSAxLjc5IDIuNDQ1IDMuNTYzIDMuMzM2IDEuNzYyLjEyIDMuNDk2LjA4NiA1LjI2Mi4wMzkgMi4yMzgtLjA0IDIuMjM4LS4wNCA0LjY2NC4xMDUgMi42ODMuMDQ3IDQuNzU4LS4wODIgNy4zMjQtLjg5OCAyLjA3OC0yLjAzNSAzLjUzNS00LjE2NCA1LjEyMS02LjYwMkEzMy45IDMzLjkgMCAwIDEgMTQzLjI1IDI3LjA2YzMuMTAyLS41MjggMy45OTItLjM0IDYuNjEgMS40MDYgMi4wNDYgMS45OTYgMi4zMzUgMi42NCAyLjY3MSA1LjQ5Ni0uMDg2IDYuNTg2LTMuMDE1IDEzLjc5Ny02LjY5NSAxOS4xNi02LjQwNiAxMC4yOTctMTEuODQ4IDIzLjMxMy0xMS41NCAzNS41Mi4wNDggOC44MDguMDQ4IDguODA4LTIuOTA1IDEyLjA3NC0xLjY0MS43NS0xLjY0MS43NS0zLjUxNi43NS0yLjg4My0xLjE1Ni00LjI2Ni0zLjI4NS01LjYyNS02LjAxMmEyMDYgMjA2IDAgMCAxLS4xODctNC4wODZjLS4yMjctMy4yODEtLjIyNy0zLjI4MS0yLjExLTUuODc1LTMuOTEtMS02LjYxNy0uNjQ4LTEwLjEzMyAxLjIwNy00LjQ0NSAyLjc3OC04LjY1MiA1Ljg5OS0xMi44MzYgOS4wNTEtMy41NDMgMi40Ni03LjMyIDIuNTY2LTExLjQ4NCAxLjk1Ny01LjY5MS0yLjMwNS04LjcyMy02LjU5NC0xMS4yNS0xMi4wMjdBNjkgNjkgMCAwIDEgNzIgNzguOTE4YTIyOSAyMjkgMCAwIDAtNi4xNTYgNi4zMjRjLTkuMDYzIDkuNTgyLTE5LjIwMyAxOC4yODEtMzIuOTE4IDE4LjczLS43OTcuMDE2LS43OTcuMDE2LTEuNjE0LjAyOC0uNzU3LjAyLS43NTcuMDItMS41My4wMzUtNC4xMy0uMDQzLTcuMTA2LTEuMDU1LTEwLjE4LTMuODM2LS4zNi0uNDMzLS43MTUtLjg3LTEuMDg2LTEuMzE2LS4zNjgtLjQzNC0uNzM5LS44NjctMS4xMTgtMS4zMTMtMi4yOTYtMy40ODgtMi4wNDYtNy44Ny0xLjY0OC0xMS44OSAxLjM2Ny01LjcyMyA0LjQxOC0xMC41NzggOS0xNC4yNzggMi4zMzYtMS4wMiAzLjM1NS0uOTY4IDYtLjc1NCAyLjE0NSAxLjMyOSAzLjM3NSAyLjI1NCA0LjUgNC41MTIuMzg3IDMuMTY0LS4yMDMgNS4xMS0xLjU5NCA3Ljg5LTEuMjI2IDIuNTUyLTEuNDU3IDMuMTE0LS44OSA2LjAxMy44MTYgMS43ODUuODE2IDEuNzg1IDEuNzM0IDIuNjMyIDIuNDA2LjQ4IDMuOTYuMzE3IDYuMDktLjkzNyA0Ljk3Ni0zLjczOCAxMC4wNzQtOC4zMjQgMTIuNjYtMTQuMDk0LS42NzItLjI4MS0uNjcyLS4yODEtMS4zNi0uNTY2LTIuNjcxLTEuNTMyLTMuNjE3LTMuMjg1LTQuNzgtNi4xMDYtMi4xODgtOC42MzMtLjY3Mi0xNy4yODUgMy42NTYtMjQuODk4IDIuNTM5LTQuMDA0IDUuNDM3LTcuNjQ5IDguNDg0LTExLjI3NC4zNTItLjQxOC43MDMtLjgzNiAxLjA2My0xLjI3IDE3Ljg5LTIxLjM0MyAxNy44OS0yMS4zNDMgMjguMTg3LTE4LjI2OW0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM3MTRhOWQ7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMzE4IDMwLjgxNmgxNy4yNWMuNTc0IDIuNDM0IDEuMTQ1IDQuODY4IDEuNzM0IDcuMzc1cS41MjEgMi4yMDQgMS4wNDcgNC40MWMuMTU2LjY2NS4zMTcgMS4zMzMuNDggMi4wMi41IDIuMDMxIDEuMDUxIDQuMDQ3IDEuNjE0IDYuMDYzLjc2MiAyLjc3MyAxLjQ1NyA1LjU1IDIuMDk0IDguMzUxbC41MjMgMi4yOTNxMS4xMzggNS4wMzUgMi4yNTggMTAuMDc0YzUuMzEzLTE4Ljk0NSA1LjMxMy0xOC45NDUgOC43NTgtMzguMjg1LjI0Mi0xLjU1LjI0Mi0xLjU1Ljk5Mi0yLjNhNzIgNzIgMCAwIDEgNC4wMTItLjA3NWMuODA4LjAwNCAxLjYxNy4wMDQgMi40NTMuMDA4IDEuMjc3LjAwOCAxLjI3Ny4wMDggMi41ODIuMDJsMi41OS4wMDdxMy4xOC4wMTcgNi4zNjMuMDRsLjA0NyAyLjU2MnEuMDg0IDQuNzE2LjE5MSA5LjQzNC4wNDMgMi4wMzguMDc4IDQuMDc4LjA1NSAyLjkzNi4xMjUgNS44N2wuMDI0IDEuODMzYy4wODYgMy4yMS40NDEgNS41NzggMS43ODUgOC41MzkuMiAyLjcyNi4yIDIuNzI2LjE4OCA1LjY4My4wMDcgMS40Ny4wMDcgMS40Ny4wMTEgMi45NjUtLjE5MSAyLjUxNi0uNTk0IDMuNDc3LTEuNjk5IDUuNjMzYTg4IDg4IDAgMCAwLS40NjkgNS40NWwtLjI4MSA1LjA3M2gtMTJWODQuOTNoLTl2My4wMDdIMzM5Yy0uNDk2LTEuMjQyLS45ODgtMi40OC0xLjUtMy43NTctLjQ2OS0uMDQ3LS45NDEtLjA5NC0xLjQyNi0uMTRsLTEuODU1LS4xOTItMS44NDgtLjE4NGMtMS42MjEtLjIzOC0xLjYyMS0uMjM4LTMuMTIxLS45ODh2NS4yNjFoLTEyem0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM2YTRhOWM7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMzM5IDI5LjMxM2MuODE2LjI5NiAxLjYzMy41OTcgMi40NzcuOTAyIDQuNDAyIDEuNzAzIDguMDgyIDMuNjcyIDExLjc3MyA2LjYxMy0uNDUzIDQuNzc0LTEuMjIzIDkuMzMyLTIuMyAxNC0uMTUuNjYtLjI5OCAxLjMxNy0uNDUgMS45OTZxLS43MDggMy4xMTItMS40MjIgNi4yMjMtLjQ4MiAyLjEyNy0uOTY1IDQuMjU0Yy0uNzg1IDMuNDUzLTEuNTc0IDYuOTAyLTIuMzYzIDEwLjM1NS0xLjQ4NC0yLjIzLTEuOTEtMy41NDctMi40NzMtNi4xMTctLjE3NS0uNzgxLS4zNTEtMS41NjItLjUzLTIuMzcxbC0uNTYtMi41NWE3MDAgNzAwIDAgMCAwLTUuNTY2LTIzLjExbC0uNTQ3LTIuMTMzYy0uMjM4LS45MjYtLjIzOC0uOTI2LS40ODQtMS44NjctLjM0LTEuNjg4LS4zNC0xLjY4OC0uMzQtNC42OTJIMzE4djUwLjM1NmMtNi45My4yNS0xMy44Ni40OTYtMjEgLjc1bC0xLjg5NS01LjI1OGMtLjIxNC0uNTk0LS40My0xLjE4Ny0uNjUyLTEuODA1cS0xLjYyMi00LjUtMy4yMzgtOWExNjA5IDE2MDkgMCAwIDAtNi4xNC0xNi44NjdsLS45NjItMi42MDFhNjIyIDYyMiAwIDAgMC0xLjc3My00LjczOWMtLjM4Ny0xLjA1LS4zODctMS4wNS0uNzgxLTIuMTI1LS4yMjMtLjU5Ny0uNDUtMS4xOTUtLjY4LTEuODEyLS40My0xLjg2My0uMzMyLTIuODguMzcxLTQuNjQ1IDEuNDgtLjg0NyAxLjQ4LS44NDcgMy40NjktMS41MDRsMi4yMzgtLjc0MmMxNi4zMDUtNC44NzUgMzUuNjkxLTguMDM5IDUyLjA0My0xLjUxMm0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiMyODk3OWI7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMjY0Ljc1IDMwLjgxNmgxNWwyLjIxIDYuNzM5YzIuNzkgOC40MjUgNS43NzQgMTYuNzc3IDguODAyIDI1LjEycTEuMjkzIDMuNTY1IDIuNTgyIDcuMTM0LjgyNCAyLjI4NiAxLjY1NiA0LjU3NGMuMjU0LjcwNy41MDggMS40MS43NyAyLjEzMyAxLjM5IDMuODMyIDEuMzkgMy44MzIgMi45MDIgNy42MTcuNTc4IDEuNTQ3LjU3OCAxLjU0Ny41NzggMy44MDVoLTEzLjVjLTEuMTMzLTMuOTczLTIuMTA1LTcuOTkzLTMtMTIuMDI4LTYuOTMuMjUtMTMuODYuNDk2LTIxIC43NTQtLjk4OCAzLjIyMy0xLjk4IDYuNDQ1LTMgOS43Ny0uNzUuNzUtLjc1Ljc1LTMuMjg1LjgyNC0xLjA0Ny0uMDA0LTIuMDktLjAxNi0zLjEzNy0uMDI4LS41MzEgMC0xLjA2Ni0uMDAzLTEuNjE3LS4wMDdxLTEuOTgtLjAxNy0zLjk2MS0uMDRjLjUwNC0zLjg1MSAxLjYwNS03LjMwOCAyLjg3OS0xMC45NTYuMjA3LS42MTQuNDE4LTEuMjI3LjYzMy0xLjg1NnExLjAwNi0yLjkxNyAyLjAyLTUuODM2IDEuMDAxLTIuOTA2IDItNS44MTJjLjQxMy0xLjIuODMxLTIuNDAzIDEuMjQ1LTMuNjAyIDIuMjkzLTYuNjI1IDQuNDQ2LTEzLjI2MiA2LjM2OC0yMC4wMDguMjMtLjguMjMtLjguNDY4LTEuNjE3LjEzMy0uNDczLjI3LS45NDUuNDA3LTEuNDMuNTc0LTEuNzggMS4yODktMy41MTUgMS45OC01LjI1bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzZlNDk5YztmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0yMTkgMzMuMDdjMy4xMjEgMi43NzQgNi41IDYuMjgyIDYuODk1IDEwLjYzcS0uMDczIDIuMTk3LS4xNDUgNC40MDJIMjE0LjVjLS40NDEtMS4yMy0uNDQxLTEuMjMtLjg5LTIuNDg5LTEuMTU3LTIuNzE4LTIuMzc2LTMuNzkzLTUuMTEtNS4wMjctMy4zNDgtMS4xMTctNy4xMS0xLjYxMy0xMC40MTQtLjEwNi0xLjM4My45MjYtMi42NTYgMS45My0zLjgzNiAzLjExNC0uMTEgMi41MjctLjA1NSA0LjM0Ny43NSA2Ljc2MWE1NiA1NiAwIDAgMCA1LjY3MiAxLjQxYzQuNTg2IDEgOS4xMDUgMi4wOTggMTMuNTk0IDMuNDc3IDEuNDE4LjQzIDEuNDE4LjQzIDIuODY3Ljg2NyA0Ljc1OCAxLjg0IDcuNjEzIDQuMDY3IDEwLjExNyA4LjUyOCAxLjM3MSA0LjQ0MSAxLjUyIDkuMzc5LS4zNzUgMTMuNjY4LTIuNzE5IDQuNzc3LTcuMzA1IDguMzk0LTEyLjM3NSAxMC4zODItOS41NDMgMS45MjItMTcuNDU3LjcyLTI2LjEwMi0zLjM3LTMuMTgtMi4xOTYtNC4yNy01LjU5LTUuNTM5LTkuMTI2bC0uNzgtMi4xNGMtLjU3OS0xLjg5OS0uNTc5LTEuODk5LS41NzktNC4xNTNoMTJ2My43NThsMi4yNS43NSAyLjI1IDIuMjU4YzIuNTE2Ljg0IDQuNzY2IDEuMDc4IDcuNDA2IDEuMzEzIDEuMzY3LjEzNiAxLjM2Ny4xMzYgMi43NjIuMjcgMi44NDgtLjA5IDQuMTAyLS42MDIgNi4zMzItMi4zMzcgMS4xNjgtMi4zNDQgMS4wMi00LjE4Ny43NS02Ljc2Mi0yLjgzNi0yLjIyMi01Ljk3Ny0yLjk0MS05LjQyMi0zLjcxNC0xNi43NzctNC4wMjQtMTYuNzc3LTQuMDI0LTIyLjAzMS0xMC45ODktMS41NDMtNS4wMDQtMS43ODUtMTAuODA4LjMyOC0xNS42OTEgMi41OS00LjMyOCA3LjIzOC03LjUyNyAxMS45ODgtOS4wODIgNy45NDYtMS41MTIgMTUuOTM0LTEuMDI0IDIyLjg4NyAzLjM5OG0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM2ZDRhOWM7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNODguNSAxNC4yODFjMi4xNiAxLjcwMyAzLjQ0NSAyLjg4NyA0LjM2IDUuNDk2bC4xNCAxLjI2Ni0yLjAzNSAxLjI3Yy0xMC4xODQgNi44NC0xNi4wOSAyMC41NTQtMjEuODI4IDMwLjk1My0uMjQyLjQ0NS0uNDg5Ljg4Ni0uNzQyIDEuMzQzcS0xLjggMy4yNjQtMy41NzUgNi41NGMtMy4wODIgNS42NDQtNi40MyAxMC45NzYtMTAuMDcgMTYuMjY1LTMuMzA1LTEuMjEtNC44MTItMi4yNS02Ljc1LTUuMjYyLTIuNzg1LTYuNTU4LTIuMzU1LTE0Ljg4Mi0uMDI3LTIxLjUyNyAyLjc2NS02LjMwOSA2Ljg3NS0xMS41NjYgMTEuMjc3LTE2LjgwNS4zNTItLjQxOC43MDMtLjgzNiAxLjA2My0xLjI3Qzc4LjE2IDExLjI1OSA3OC4xNiAxMS4yNTkgODguNSAxNC4yODJtMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNzZjM2ExO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTgzLjI1IDYwLjEyOWMyLjU3IDEuMiAzLjUgMS43OTMgNC41IDQuNTA4LjE4OC44NjcuMzcxIDEuNzM4LjU2MyAyLjYyOSAxLjQ0NSA2LjAwNCA0LjI1IDEyLjQ0NSA5LjMgMTYuMjE0IDIuNDggMS4yNDcgNC43MTkgMS40MzQgNy4zODcuNyA1LjA3OC0yLjIzNSA3LjUyMy01LjYwNiAxMC42NC0xMC4xMDIuOTAzLTEuMjY2IDEuODAxLTIuNTM1IDIuNzA0LTMuOC42MjUtLjg4My42MjUtLjg4MyAxLjI1OC0xLjc4NiAxLjMyLTEuODQgMi43MDctMy42MTMgNC4xNDgtNS4zNmwyLjI1Ljc1NWMtLjk1NyA3Ljc3LTEuOTUzIDE1LjUzNS0zIDIzLjI5Ny0uNTctLjIzLTEuMTQtLjQ2NS0xLjcyNy0uNzA3LTMuMTAxLTEuMjItNS42NC0yLjA2Ny04LjkzMy0xLjAyLTQuNTIgMi4wODYtOC4zNDQgNC45OTYtMTIuMTc2IDguMTMzLTQuMTAyIDMuMzI0LTcuNDUzIDQuNTgyLTEyLjY5NSA0LjQ0MS00LjM0NC0uNzE1LTcuNDA2LTMuMTMzLTEwLjA1OS02LjU3LTIuNzgxLTQuMzk4LTUuNjI1LTkuNDE4LTUuMjU4LTE0Ljc0Ni42ODgtMi42NDkgMS43MDMtNC4xODQgMy4zNjQtNi4zNDhsMS42MjUtMi4xNDRjLjUzLS42ODggMS4wNjItMS4zNzUgMS42MDktMi4wODJxMS4zMTMtMS43NTkgMi42MjUtMy41MjQuOTM4LTEuMjQ3IDEuODc1LTIuNDg4bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzZlYmJhMDtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik05Ny41IDQwLjU4Nkg5OWMuOTE0IDEuMjg5LjkxNCAxLjI4OSAxLjg3NSAyLjk2IDEuMjYyIDIuMzQgMS4yNjIgMi4zNCAzLjM3NSAzLjgwNiAxLjI1LjA2MiAyLjUwNC4wNzggMy43NTQuMDcuNzQyIDAgMS40OC0uMDA0IDIuMjQyLS4wMDQgMS4xNjQtLjAxMiAxLjE2NC0uMDEyIDIuMzQ4LS4wMmwyLjM2My0uMDExcTIuOS0uMDEyIDUuNzkzLS4wMzVjLS41NzQgMy41NDYtMS45NjkgNS43NzMtNC4xNzIgOC41NDYtLjMzNi40My0uNjc2Ljg2LTEuMDIzIDEuMzAxLTMuMzk5IDQuMjM5LTYuNTYzIDguMDk0LTExLjgyIDkuODgtMi40ODUtLjE4OC0yLjQ4NS0uMTg4LTQuNTk0LTEuNzQtMy4wODItNC4xNDQtMy4zODMtOC4wNy0zLjMyOS0xMy4wNThxLS4wMS0uODEzLS4wMTUtMS42NDhjLjAxMi0zLjYyMS41NjYtNi42MTMgMS43MDMtMTAuMDQ3bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzZiYmFhMTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0zMjkuMjUgNDQuMzQ0YzEuMzkgMi4wOTMgMS44MzIgMy4xODMgMi4zNiA1LjU1NC4xNDguNjY4LjMgMS4zMzIuNDUyIDIuMDE2LjE1Ny43MTUuMzEzIDEuNDM0LjQ3MyAyLjE3MmExMDA2LjQ0NSAxMDA2LjQ0NSAwIDAgMSAxLjUzMSA2LjkyNmMuNTI0IDIuMzkgMS4wNTkgNC43NzcgMS41OSA3LjE2NHEuNTA1IDIuMjggMS4wMDQgNC41NThsLjQ4NSAyLjE2Yy4xNDQuNjcyLjI5MyAxLjM0LjQ0IDIuMDMybC4zOTIgMS43NzNjLjI5MyAxLjg1Mi4zMiAzLjYwNi4yNzMgNS40OGE1NzcgNTc3IDAgMCAxLTMuNjU2LS4zMzFjLS42OC0uMDU5LTEuMzU2LS4xMjEtMi4wNTktLjE4NC0xLjc4NS0uMjM4LTEuNzg1LS4yMzgtMy4yODUtLjk4OHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojMjU5MzliO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTM2MCA0NS44NDhoLjc1Vjg0LjkzaC05Yy44MDktNi43NjYgMi4wNzQtMTMuMTcyIDMuNzczLTE5Ljc1OCAxLjY1My02LjQwNiAzLjA4Mi0xMi44NTYgNC40NzctMTkuMzI0bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzFlOTE5YjtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0yNzEuNSA0NS4wOTRoMS41YzIuMjM0IDYuOTcyIDQuMzEzIDEzLjkxOCA2IDIxLjA0N2gtMTMuNWMuNDk2LTMuNDczLjg4My02LjA0IDEuOTczLTkuMjI3bC43MS0yLjExLjczOS0yLjE0NC43NS0yLjIxcS45MDgtMi42NzkgMS44MjgtNS4zNTZtMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojM2E5NjljO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTg1LjUgNzUuOTFjMi43NzcgMS41NDcgMy41ODYgMi40ODggNC41NDcgNS41NDMtLjA1OSAzLjQ1LS42NDUgNC43Ny0zLjA0NyA3LjIzNC0yLjA1LjgwNS0zLjgxMiAxLjAyOC02IC43NTQtMi4xNDUtMS4zMjgtMy4zNzUtMi4yNTQtNC41LTQuNTExLS4zMjQtMi45MS0uMjM4LTQuMTUzIDEuNDA2LTYuNjI1IDIuNDc3LTIuNTU1IDQuMDc4LTIuNzM5IDcuNTk0LTIuMzk1bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6I2VlNzE0MztmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0xMzguNzUgMzUuNjUyYzIuODgzLjU0MyA0LjA2MyAxLjIxMSA2IDMuNDMgMS4xMSAzLjEwMiAxLjA5IDUuMjczLS4yODEgOC4yNy0yLjQ4IDEuODk0LTQuMDYzIDIuMDA3LTcuMTIxIDEuODA4LTEuNTk4LS4zMDgtMS41OTgtLjMwOC0zLjUyLTEuNDMzLTEuNTA4LTIuNjMtMS43MzgtNC45OC0xLjA3OC03Ljg5MSAxLjgzMi0yLjU5NCAyLjg3MS0zLjU5NCA2LTQuMTg0bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzVkYmJjMTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0xNDAuMjUgNDMuNTk0aDQuNWMtLjU2MiAzLjU3LS41NjIgMy41Ny0yLjI1IDUuMjU4LTIuMjc3LjM3NS00LjQ3My4zNjMtNi43NSAwLTEuNTQ3LTEuNS0xLjU0Ny0xLjUtMi4yNS0zLjAwNCAyLjI1LTEuNTA0IDIuMjUtMS41MDQgNC41LTEuNTA0djEuNTA0aDIuMjV6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzMzYjFkMDtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik04OS4yNSA4MC40MjJIOTBjLS42MDIgNi4yNS0uNjAyIDYuMjUtMyA4LjI2Ni0yLjAyNy40NzItMy45MDYuNjEzLTYgLjc1M2wxLjUtMS41MDRWODUuNjhsLjc1LS43NWMtLjQ5Ni0uMjQ2LS45ODgtLjQ5Ni0xLjUtLjc1di0yLjI1OGgzLjc1djIuMjU4YzEuMjM4LS4yNSAyLjQ3Ny0uNDk2IDMuNzUtLjc1NHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojZTA4Yjg2O2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTM3Mi43NSA1OS4zNzVjMi43IDIuNzAzIDIuNDEgNS43NDYgMi40MzggOS4zNDhsLjA1OCAzLjAwNGMtLjI0NiAyLjY4LS4yNDYgMi42OC0yLjQ5NiA1LjY4N3ptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojMTg5MDlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTc2LjUgODAuNDIyYy40OTYuOTkyLjk4OCAxLjk4NCAxLjUgMy4wMDQgMS4yMzgtLjQ5NiAyLjQ3Ny0uOTkyIDMuNzUtMS41MDR2Mi4yNThjLjc0Mi4yNDYgMS40ODQuNDk2IDIuMjUuNzVsLTEuNSAxLjUwNHYyLjI1NGMtMi4yMy0uMjQzLTMuNDQ1LS40NjUtNS4xMS0yLjAyLTEuMTItMi4xODgtMS4wNTQtMy44Mi0uODktNi4yNDZtMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojZWU3ZjZjO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTE2NSA5OS45NmgzdjcuNTE3Yy0xLjIzOC0uMjQ3LTIuNDc3LS40OTctMy43NS0uNzUtLjA3NC00LjYyNS0uMDc0LTQuNjI1IDAtNi4wMTIuMjQ2LS4yNS40OTYtLjQ5Ni43NS0uNzU0bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzkxNGE5ZTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0xNjUgMjMuM2gzdjcuNTE2Yy0xLjIzOC0uMjUtMi40NzctLjQ5Ni0zLjc1LS43NTMtLjA3NC00LjYyMi0uMDc0LTQuNjIyIDAtNi4wMTJ6TTE2NSAxMC41MjNoM3Y3LjUxNmMtMS4yMzgtLjI1LTIuNDc3LS40OTYtMy43NS0uNzU0LS4wNzQtNC42Mi0uMDc0LTQuNjIgMC02LjAxMnptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojOTI0YTllO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTYwLjc1IDExNC45OTJINjlWMTE4aC04LjI1em0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM2MzQ2OWI7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNNjAuNzUgMEg2OXYzLjAwOGgtOC4yNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNjQ0NTliO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTQ4IDBoOC4yNXYzLjAwOEg0OHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNWM0NTlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTg2LjI1IDExNC45OTJoNy41Yy4yNDYuOTkyLjQ5NiAxLjk4NS43NSAzLjAwOGgtOC4yNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNzQ0ODljO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTczLjUgMTE0Ljk5Mkg4MWMuMjQ2Ljk5Mi40OTYgMS45ODUuNzUgMy4wMDhINzMuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNmM0ODljO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTQ4Ljc1IDExNC45OTJoNy41VjExOEg0OGMuMjQ2LS45OTIuNDk2LTEuOTg0Ljc1LTMuMDA4bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzU5NDU5YjtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0xNjUgMTEyLjczOGgzVjExOGgtNS4yNXYtMy4wMDhoMS41em0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM5NjRkOWU7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTY1IDM2LjA3OGgzdjcuNTE2aC0zYTQ4NiA0ODYgMCAwIDEtLjQyMi0zLjMzNmMtLjA3OC0uNjIxLS4xNTYtMS4yMzgtLjIzOC0xLjg3NS0uMDI4LS41MTYtLjA1OS0xLjAyOC0uMDktMS41NTUuMjQ2LS4yNS40OTYtLjQ5Ni43NS0uNzVtMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojOGM2MzlmO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTE2Mi43NSAwSDE2OHY1LjI2MmMtMS4yMzgtLjI1LTIuNDc3LS40OTYtMy43NS0uNzU0di0xLjVoLTEuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojOTY0ZDllO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTg2LjI1IDBoNy41djMuMDA4aC03LjV6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6Izc1NDg5YztmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik03My41IDBIODF2My4wMDhoLTcuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNmU0ODljO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTE1MCAxMTQuOTkyaDcuNVYxMThIMTUwem0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM5NTRkOWQ7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTM3LjI1IDExNC45OTJoNy41VjExOGgtNy41em0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM4ZjRjOWQ7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTI0LjUgMTE0Ljk5Mmg3LjVWMTE4aC03LjV6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6Izg5NGI5ZDtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0xMTEuNzUgMTE0Ljk5Mmg3LjVWMTE4aC03LjV6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzgzNGE5ZDtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik05OSAxMTQuOTkyaDcuNVYxMThIOTl6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzdjNDk5YztmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0zNiAxMTQuOTkyaDcuNVYxMThIMzZ6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzUwNDQ5YjtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0yMy4yNSAxMTQuOTkyaDcuNVYxMThoLTcuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNDY0MzlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTEwLjUgMTE0Ljk5MkgxOFYxMThoLTcuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojMzg0MjlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTAgMTEyLjczOGgzdjIuMjU0aDIuMjVWMTE4SDB6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzJlNDI5YTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0wIDk5Ljk2aDN2Ny41MTdIMHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojMmQ0MjlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTE2NSA4Ny4xODRoM3Y3LjUxNWgtM3ptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojODg2ZjlmO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTAgODcuMTg0aDN2Ny41MTVIMHpNMCA3NC40MDZoM3Y3LjUxNkgwem0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiMyZDQyOWE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTY1IDYxLjYyOWgzdjcuNTJoLTN6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6Izg4NmY5ZjtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0wIDYxLjYyOWgzdjcuNTJIMHpNMCA0OC44NTJoM3Y3LjUySDB6TTAgMzYuMDc4aDN2Ny41MTZIMHpNMCAyMy4zaDN2Ny41MTZIMHpNMCAxMC41MjNoM3Y3LjUxNkgwem0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiMyZDQyOWE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTUwIDBoNy41djMuMDA4SDE1MHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojOTY0ZDllO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTEzNy4yNSAwaDcuNXYzLjAwOGgtNy41em0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM5MDRjOWQ7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTI0LjUgMGg3LjV2My4wMDhoLTcuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojOGI0YjlkO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTExMS43NSAwaDcuNXYzLjAwOGgtNy41em0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM4NDRhOWQ7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNOTkgMGg3LjV2My4wMDhIOTl6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzdkNGE5YztmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0zNiAwaDcuNXYzLjAwOEgzNnptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojNTM0NDliO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTIzLjI1IDBoNy41djMuMDA4aC03LjV6bTAgMCIgc3R5bGU9InN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzQ4NDM5YjtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIGQ9Ik0xMC41IDBIMTh2My4wMDhoLTcuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojM2I0MjlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTAgMGg1LjI1djMuMDA4SDN2Mi4yNTRIMHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojMmU0MjlhO2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0ibTg3IDc3LjQxNCAyLjI1IDEuNTA0Yy4yODEgMi4yNTQuMjgxIDIuMjU0IDAgNC41MDhMODcgODQuOTNjLS43NDItLjI0Ni0xLjQ4NC0uNDk2LTIuMjUtLjc1LjI0Ni0uNzQ2LjQ5Ni0xLjQ4OS43NS0yLjI1OGgtMy43NXYtLjc1TDg3IDc5LjY2OHptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojZWU3ZDY2O2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTE2NSA3NS4xNmgzdjYuNzYyaC0zem0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM4YjZhOWY7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTY1IDQ5LjYwNWgzdjYuNzY2aC0zem0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiM4YjZiOWY7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNMTM4IDM5LjgzNmgyLjI1djEuNWgxLjV2Mi4yNThoLTEuNXYyLjI1NEgxMzh2LTIuMjU0aC0xLjV2LTIuMjU4aDEuNXptMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojY2NlM2U3O2ZpbGwtb3BhY2l0eToxIi8+PHBhdGggZD0iTTgxLjc1IDgxLjkyMmgzLjc1Yy40NjkgMS43ODUuNDY5IDEuNzg1Ljc1IDMuNzU4bC0xLjUgMS41MDRjLTEuNTk0LS4yODItMS41OTQtLjI4Mi0zLS43NS40OTYtLjQ5Ni45ODgtLjk5MyAxLjUtMS41MDQtLjQ5Ni0uMjQ2LS45ODgtLjQ5Ni0xLjUtLjc1em0wIDAiIHN0eWxlPSJzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOiNmMWEwOTY7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBkPSJNNzYuNSA4MC40MjJjLjQ5Ni45OTIuOTg4IDEuOTg0IDEuNSAzLjAwNGwzLS43NWMtLjIzNCAxLjQxLS4yMzQgMS40MS0uNzUgMy4wMDRMNzggODcuMTg0Yy0xLjcxOS0yLjU4Mi0xLjYzMy0zLjc0Ni0xLjUtNi43NjJtMCAwIiBzdHlsZT0ic3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDojZTc3YjU3O2ZpbGwtb3BhY2l0eToxIi8+PC9zdmc+"
LABEL oc.keyword="napari, microsam, sam"
LABEL oc.cat="development"
LABEL oc.desktopfile="microsam.desktop"
LABEL oc.launch="microsam.napari"
LABEL oc.template="abcdesktopio/oc.template.ubuntu.minimal.22.04"
#ENV ARGS="--extensions-dir /usr/share/code/extensions --verbose"
#ENV ARGS="--extensions-dir ~/.vscode/extensions --verbose"
LABEL oc.name="microsam"
LABEL oc.displayname="microSAM"
LABEL oc.path="/opt/conda/envs/sam/bin/napari"
LABEL oc.type=app
LABEL oc.rules="{\"homedir\":{\"default\":true}}"
LABEL oc.acl="{\"permit\":[\"all\"]}"
LABEL oc.showinview=dock

RUN  if [ -d /usr/share/icons ]   && [ -x /composer/safelinks.sh ] && [ -d /usr/share/icons   ];  then cd /usr/share/icons;    /composer/safelinks.sh; fi \
    && if [ -d /usr/share/pixmaps ] && [ -x /composer/safelinks.sh ] && [ -d /usr/share/pixmaps ];  then cd /usr/share/pixmaps;  /composer/safelinks.sh; fi 

ENV APPNAME "microSAM"
ENV APPBIN "/opt/conda/envs/sam/bin/napari"
ENV APP "/opt/conda/envs/sam/bin/napari"

#LABEL oc.args="--extensions-dir /usr/share/code/extensions --verbose"
#LABEL oc.args="--extensions-dir ~/.vscode/extensions --verbose"

ENV LD_LIBRARY_PATH "/usr/local/cuda/lib64:${LD_LIBRARY_PATH}",
ENV NVIDIA_DRIVER_CAPABILITIES "compute,utility"

RUN mkdir -p /run/user \
    && chmod 777 /run/user \
    && mkdir -p /etc/localaccount \
    && for f in passwd shadow group gshadow ; do if [ -f /etc/$f ] ; then  cp /etc/$f /etc/localaccount; rm -f /etc/$f; ln -s /etc/localaccount/$f /etc/$f; fi; done

CMD [ "/composer/appli-docker-entrypoint.sh" ]

