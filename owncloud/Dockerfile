ARG TAG=dev
FROM abcdesktopio/oc.template.gtk:$TAG
ENV LC_ALL=en_US.UTF-8

ENV DEBIAN_FRONTEND noninteractive
ENV TZ Europe/Berlin

RUN apt-get update -y
RUN apt install -y locales
RUN locale-gen en_US
RUN locale-gen en_US.UTF-8
RUN update-locale

RUN apt-get install -y wget owncloud-client --no-install-recommends

LABEL oc.icon="owncloud.svg"
LABEL oc.icondata="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iNDQzLjM0MzQxIgogICBoZWlnaHQ9IjIxOC45MDkwMSIKICAgaWQ9InN2Zzg5NDQiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgciIKICAgc29kaXBvZGk6ZG9jbmFtZT0iT3duQ2xvdWQyLUxvZ28uc3ZnIj4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGEyNiI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGUgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzY2IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjcxOCIKICAgICBpZD0ibmFtZWR2aWV3MjQiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGZpdC1tYXJnaW4tdG9wPSI1IgogICAgIGZpdC1tYXJnaW4tcmlnaHQ9IjUiCiAgICAgZml0LW1hcmdpbi1ib3R0b209IjUiCiAgICAgZml0LW1hcmdpbi1sZWZ0PSI1IgogICAgIGlua3NjYXBlOnpvb209IjEuNDYzNDUwNSIKICAgICBpbmtzY2FwZTpjeD0iMTk2Ljg3ODY4IgogICAgIGlua3NjYXBlOmN5PSI0Mi40MTY5NTUiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmc4OTQ0IiAvPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4OTQ2IiAvPgogIDxjaXJjbGUKICAgICBjeD0iMjguOTk5MDAxIgogICAgIGN5PSIxODkuOTA4IgogICAgIHI9IjIxLjk5OTAwMSIKICAgICBpZD0iY2lyY2xlMjM4IgogICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMxZDJkNDQ7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICA8Y2lyY2xlCiAgICAgY3g9IjI5Ni41MTIwMiIKICAgICBjeT0iMTg5LjkwOCIKICAgICByPSIyMi4wMDA5OTkiCiAgICAgaWQ9ImNpcmNsZTI0MCIKICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMWQyZDQ0O3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDY3LjAwMDAwNCwxNjcuNzAzIDAsMzAuMDc0IGMgMCw3LjgwMSA2LjMyNCwxNC4xMjMgMTQuMTIzLDE0LjEyMyA3LjgwMywwIDE0LjEyNSwtNi4zMjIgMTQuMTI1LC0xNC4xMjMgMCwtMC4wMDQgMCwtMzAuMDc0IDAsLTMwLjA3NCIKICAgICBpZD0icGF0aDI0MiIKICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMWQyZDQ0O3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICA8cGF0aAogICAgIGQ9Im0gOTUuMjQ4MDA0LDE2Ny43MDMgMCwzMC4wNzQgYyAwLDcuODAxIDYuMzIzOTk2LDE0LjEyMyAxNC4xMjQ5OTYsMTQuMTIzIDcuODAxLDAgMTQuMTI1LC02LjMyMiAxNC4xMjUsLTE0LjEyMyAwLC0wLjAwNCAwLC0zMC4wNzQgMCwtMzAuMDc0IgogICAgIGlkPSJwYXRoMjQ0IgogICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMxZDJkNDQ7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgogIDxwYXRoCiAgICAgZD0ibSAyNTEuMjY1LDEyNy42OTkgMCw3MC4wNzggYyAwLDcuODAxIDYuMzIyLDE0LjEyMyAxNC4xMjMsMTQuMTIzIgogICAgIGlkPSJwYXRoMjQ2IgogICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMxZDJkNDQ7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgogIDxwYXRoCiAgICAgZD0ibSAxNDAuMDA0LDIxMS45MDYgMCwtMjIuMjAxIGMgMCwtMTIuMTUgOS44NSwtMjIgMjIsLTIyIDEyLjE1MiwwIDIyLjAwMiw5Ljg1IDIyLjAwMiwyMiAwLDAuMDA2IDAsMjIuMjAxIDAsMjIuMjAxIgogICAgIGlkPSJwYXRoMjQ4IgogICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMxZDJkNDQ7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgogIDxwYXRoCiAgICAgZD0ibSAzMzMuMDA5LDE2Ny43MDMgMCwyMi4yMDUgYyAwLDEyLjE0OCA5Ljg1LDIxLjk5OCAyMiwyMS45OTggMTIuMTUsMCAyMi4wMDIsLTkuODUgMjIuMDAyLC0yMS45OTggMCwtMC4wMDggMCwtMjIuMjA1IDAsLTIyLjIwNSIKICAgICBpZD0icGF0aDI1MCIKICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMWQyZDQ0O3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICA8cGF0aAogICAgIGQ9Im0gMjM0LjgzMywxNDEuNTc2IGMgLTE5LjQyMSwwIC0zNS4xNjcsMTUuNzQ0IC0zNS4xNjcsMzUuMTY2IDAsMTkuNDIyIDE1Ljc0NiwzNS4xNjQgMzUuMTY3LDM1LjE2NCIKICAgICBpZD0icGF0aDI1MiIKICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMWQyZDQ0O3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICA8cG9seWxpbmUKICAgICBwb2ludHM9IjUwNC41OTYsMTYyLjk2MiA1MDQuNTk2LDIwMy4xMzQgNTA0LjU5NiwyMDIuMTU1ICIKICAgICBpZD0icG9seWxpbmUyNTQiCiAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzFkMmQ0NDtzdHJva2Utd2lkdGg6NDtzdHJva2Utb3BhY2l0eToxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02OC4zMTI5OTYsLTM1LjI2Mjk5NykiIC8+CiAgPHBhdGgKICAgICBkPSJtIDQyMS45MjMsMjExLjg5NCBjIC00LjI3NSwwIC03Ljg0NCwwIC03Ljg0OCwwIC0xMi4xNSwwIC0yMiwtOS44NSAtMjIsLTIxLjk5OCAwLC0xMi4xNSA5Ljg1LC0yMiAyMiwtMjIgbCAyMi4yMDcsLTAuMDI1IGMgMCwwIDAuMTM3LDIyLjM0MiAwLDI5Ljg5NSAtMC4xMzgsNy41NTIgLTcuOTY4LDE0LjEyOCAtMTQuMzU5LDE0LjEyOCB6IgogICAgIGlkPSJwYXRoMjU2IgogICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMxZDJkNDQ7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgogIDxjaXJjbGUKICAgICBjeD0iMjIwLjE4MSIKICAgICBjeT0iNDMuNjQ4MDA2IgogICAgIHI9IjIwLjMzMjAwMSIKICAgICBpZD0iY2lyY2xlMjY1IgogICAgIHN0eWxlPSJmaWxsOiMxZDJkNDQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICA8Y2lyY2xlCiAgICAgY3g9IjE4Mi44OTgwMSIKICAgICBjeT0iMTE0LjMxNCIKICAgICByPSIzNy4yNDIwMDEiCiAgICAgaWQ9ImNpcmNsZTI3MiIKICAgICBzdHlsZT0iZmlsbDojMWQyZDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPGNpcmNsZQogICAgIGN4PSIyMjQuOTEyMDIiCiAgICAgY3k9Ijg5LjUzMzAwNSIKICAgICByPSI0MC4yNjEwMDIiCiAgICAgaWQ9ImNpcmNsZTI3OSIKICAgICBzdHlsZT0iZmlsbDojMWQyZDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPGNpcmNsZQogICAgIGN4PSIzMDcuMDIxMDMiCiAgICAgY3k9IjczLjIwOSIKICAgICByPSIzNy4yNDIwMDEiCiAgICAgaWQ9ImNpcmNsZTI4NiIKICAgICBzdHlsZT0iZmlsbDojMWQyZDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPGNpcmNsZQogICAgIGN4PSIyNjYuMTgwMDIiCiAgICAgY3k9IjQ0LjI0MTAwMSIKICAgICByPSIzNy4yNDEwMDEiCiAgICAgaWQ9ImNpcmNsZTI5MyIKICAgICBzdHlsZT0iZmlsbDojMWQyZDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPGNpcmNsZQogICAgIGN4PSIzOTAuMTE0MDEiCiAgICAgY3k9IjEyOC42OTQ5OSIKICAgICByPSIyMS4yOTk5OTkiCiAgICAgaWQ9ImNpcmNsZTMwMCIKICAgICBzdHlsZT0iZmlsbDojMWQyZDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPGNpcmNsZQogICAgIGN4PSIzNDQuODUwMDEiCiAgICAgY3k9IjExMi4zIgogICAgIHI9IjQwLjI2MTAwMiIKICAgICBpZD0iY2lyY2xlMzA3IgogICAgIHN0eWxlPSJmaWxsOiMxZDJkNDQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICA8Y2lyY2xlCiAgICAgY3g9IjIyMi40NDkwMSIKICAgICBjeT0iMTMwLjc0OCIKICAgICByPSIyMS4yOTkiCiAgICAgaWQ9ImNpcmNsZTMxNCIKICAgICBzdHlsZT0iZmlsbDojMWQyZDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDMyOS43OTQsMTAwLjQwNiBjIDAsMjguMzQ4IC0yMi45ODQsNTEuMzI4IC01MS4zMzQsNTEuMzI4IC0yOC4zNSwwIC01MS4zMzMsLTIyLjk4IC01MS4zMzMsLTUxLjMyOCAwLC0yOC4zNTA5OTUgMjIuOTg0LC01MS4zMzI5OTcgNTEuMzMzLC01MS4zMzI5OTcgMjguMzQ5LDAgNTEuMzM0LDIyLjk4MjAwMiA1MS4zMzQsNTEuMzMyOTk3IHoiCiAgICAgaWQ9InBhdGgzMjEiCiAgICAgc3R5bGU9ImZpbGw6IzFkMmQ0NDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6NDtzdHJva2Utb3BhY2l0eToxIgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIC8+Cjwvc3ZnPgo="
LABEL oc.keyword="ownCloud"
LABEL oc.cat="development"
LABEL oc.template="abcdesktopio/oc.template.gtk"
LABEL oc.name="ownCloud"
LABEL oc.launch="/usr/bin/owncloud"
LABEL oc.displayname="ownCloud"
LABEL oc.path="/usr/bin/owncloud"
LABEL oc.rules="{\"homedir\":{\"default\":true}}"
LABEL oc.type=app
LABEL oc.showinview=dock
LABEL oc.acl="{\"permit\":[\"all\"]}"
LABEL oc.host_config="{\"mem_limit\":\"4G\",\"shm_size\":\"2G\",\"pid_mode\":false,\"cpu_period\":100000,\"cpu_quota\":400000}"
RUN  if [ -d /usr/share/icons ];   then cd /usr/share/icons;    /composer/safelinks.sh; fi 
RUN  if [ -d /usr/share/pixmaps ]; then cd /usr/share/pixmaps;  /composer/safelinks.sh; fi 

ENV APPNAME "ownCloud"
ENV APPBIN "/usr/bin/owncloud"
ENV APP "/usr/bin/owncloud"

#CMD /usr/bin/owncloud

CMD ["/composer/appli-docker-entrypoint.sh" ]


